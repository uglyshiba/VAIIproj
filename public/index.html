<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Title</title>
    <link rel="stylesheet" href="./css/banner.css" type="text/css">
    <link rel="stylesheet" href="./css/thread.css" type="text/css">
    <link rel="stylesheet" href="./css/style.css" type="text/css">
    <script src="./js/randomizeLetterColor.js"></script>
</head>

<body>
<header>
    <h1 id="nadpis">Gumball forum</h1>
    <script src="./js/banner.js"></script>
    <nav>
        <div class="navbar">
            <a href="./episodes.html" class="navbar-item">Episodes</a>
            <a href="./about.html" class="navbar-item">About</a>
            <a href="./login.html" class="navbar-item" id="login-link">Log in</a>
            <a href="./usersList.html" class="navbar-item">Users</a>
            <a href="./createThread.html" class="navbar-item">Create thread</a>
        </div>
    </nav>
</header>

<main>
<div class="thread-container">
    <div class="thread">
        <h2 class="thread-title">Thread 1</h2>
        <p class="last-message">Last message: Lorem ipsum dolor sit amet...</p>
    </div>
    <div class="thread">
        <h2 class="thread-title">Thread 2</h2>
        <p class="last-message">Last message: Lorem ipsum dolor sit amet...</p>
    </div>
    <div class="thread">
        <h2 class="thread-title">Thread 3</h2>
        <p class="last-message">Last message: Lorem ipsum dolor sit amet...</p>
    </div>
    <div class="thread">
        <h2 class="thread-title">Thread 4</h2>
        <p class="last-message">Last message: Lorem ipsum dolor sit amet...</p>
    </div>
    <div class="thread">
        <h2 class="thread-title">Thread 5</h2>
        <p class="last-message">Last message: Lorem ipsum dolor sit amet...</p>
    </div>
</div>
</main>
<script>
    randomizeLetterColor("#nadpis");
</script>
<script type="module">
    import { checkLoginStatus, displayUserProfile } from './js/checkSession.js';
    document.addEventListener('DOMContentLoaded', async () => {
        try {
            const response = await checkLoginStatus();
            const loginLink = document.getElementById('login-link');

            if (response) {
                // User is logged in, update link to Profile
                loginLink.textContent = 'Profile';
                //loginLink.href = './profile.html';  // Change to the appropriate profile page URL
                // Display user profile information above the banner
                displayUserProfile(response);
            }
        } catch (err) {
            console.error('Error checking login status:', err);
        }
    });
</script>
</body>
</html>
